<!DOCTYPE html>
<html lang="en">

<head>
            <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">


        <title>Rust in 2020</title>

            <link href="https://mindriot101.github.io/feeds/all.xml" type="application/atom+xml" rel="alternate" title="circularspace Full Atom Feed" />
            <link href="https://mindriot101.github.io/feeds/tech.xml" type="application/atom+xml" rel="alternate" title="circularspace Categories Atom Feed" />
        <!-- Bootstrap Core CSS -->
        <link href="https://mindriot101.github.io/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="https://mindriot101.github.io/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="https://mindriot101.github.io/theme/css/code_blocks/monokai.css" rel="stylesheet">


        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->



        <meta name="description" content="Wow what a year for Rust. 2019 has flown by (in real life as well), with so many developments since the beginning of 2019. The 2018...">

        <meta name="author" content="Simon Walker">

        <meta name="tags" content="rust">
        <meta name="tags" content="rust2020">

	                <meta property="og:locale" content="">
		<meta property="og:site_name" content="circularspace">

	<meta property="og:type" content="article">
            <meta property="article:author" content="https://mindriot101.github.io/author/simon-walker.html">
	<meta property="og:url" content="https://mindriot101.github.io/blog/2019/11/28/rust-in-2020/">
	<meta property="og:title" content="Rust in 2020">
	<meta property="article:published_time" content="2019-11-28 21:39:37+00:00">
            <meta property="og:description" content="Wow what a year for Rust. 2019 has flown by (in real life as well), with so many developments since the beginning of 2019. The 2018...">

            <meta property="og:image" content="https://mindriot101.github.io/theme/images/post-bg.jpg">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:site" content="@srwalker101">
        <meta name="twitter:title" content="Rust in 2020">

            <meta name="twitter:image" content="https://mindriot101.github.io/theme/images/post-bg.jpg">

            <meta name="twitter:description" content="Wow what a year for Rust. 2019 has flown by (in real life as well), with so many developments since the beginning of 2019. The 2018...">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="https://mindriot101.github.io/">circularspace</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                        <li><a href="/archives.html">all</a></li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
        <header class="intro-header" style="background-color: #444">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="post-heading">
                        <h1>Rust in 2020</h1>
                        <span class="meta">Posted by
                                <a href="https://mindriot101.github.io/author/simon-walker.html">Simon Walker</a>
                             on Thu 28 November 2019
                        </span>
                        
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
    <!-- Post Content -->
    <article>
        <p>Wow what a year for Rust. 2019 has flown by (in real life as well), with so many
developments since the beginning of 2019. The 2018 edition has brought so many
quality of life improvements to day to day Rust development, particularly the
more intuitive module system, NLL, and proc-macros.</p>
<p>Rust 2020 has a lot to live up to!</p>
<p>Well...</p>
<p>My thoughts for Rust 2020 are perhaps a little less aimed at new features I want
to see than some other roadmaps, but more towards continuing the quality of life
improvements, and expanding the ecosystem. My thoughts can be grouped into:</p>
<ol>
<li>Simplicity</li>
<li>A Greater Ecosystem</li>
<li>Compile Time</li>
<li>Misc</li>
</ol>
<h2>Simplicity</h2>
<p>Rust has never been a <em>very</em> simple language. Not like go or C. Certainly not as
bad as C++. I enjoyed being a beginner in Rust, being helped<sup id="fnref:1"><a class="footnote-ref" href="#fn:1" rel="footnote">1</a></sup> by the compiler
at every step. The language for a beginner was relatively simple: functions,
<code>struct</code>s, <code>trait</code>s and <code>enum</code>s. This made for a very powerful language
(particularly the <code>enum</code>s which are my favourite), yet a small surface area.</p>
<p>As I moved on I started looking more at generics (coming from C++ this was not
too complex for me) and traits in greater detail, but it was still not
unsurmountable.</p>
<p>When I look at Rust code today, I see quite a lot of intimidating complexity.
For example this function definition from <a href="https://diesel.rs/">diesel</a>:</p>
<div class="highlight"><pre><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">Ret</span><span class="p">,</span><span class="w"> </span><span class="n">DB</span><span class="o">&gt;</span><span class="w"> </span><span class="n">QueryFragment</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">InsertStatement</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">Op</span><span class="p">,</span><span class="w"> </span><span class="n">Ret</span><span class="o">&gt;</span><span class="w"></span>
<span class="n">where</span><span class="w"></span>
<span class="w">    </span><span class="n">DB</span><span class="o">:</span><span class="w"> </span><span class="n">Backend</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span><span class="o">:</span><span class="w"> </span><span class="n">Table</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span><span class="o">::</span><span class="n">FromClause</span><span class="o">:</span><span class="w"> </span><span class="n">QueryFragment</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U</span><span class="o">:</span><span class="w"> </span><span class="n">QueryFragment</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">CanInsertInSingleQuery</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Op</span><span class="o">:</span><span class="w"> </span><span class="n">QueryFragment</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Ret</span><span class="o">:</span><span class="w"> </span><span class="n">QueryFragment</span><span class="o">&lt;</span><span class="n">DB</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span>
</pre></div>


<p>Or this seemingly magic incantation for command line parsing from
<a href="https://github.com/killercup/cargo-edit/blob/77be59f1f03672211bbce4ab5ccbe264eb6b7a3d/src/bin/upgrade/main.rs#L69">cargo-edit</a>:</p>
<div class="highlight"><pre><span class="cp">#[derive(Debug, StructOpt)]</span><span class="w"></span>
<span class="k">struct</span><span class="w"> </span><span class="n">Args</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c-Doc">/// Crates to be upgraded.</span>
<span class="w">    </span><span class="n">dependency</span><span class="o">:</span><span class="w"> </span><span class="n">Vec</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Path to the manifest to upgrade</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;manifest-path&quot;</span><span class="cp">, value_name = </span><span class="s">&quot;path&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="n">manifest_path</span><span class="o">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">PathBuf</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Upgrade all packages in the workspace.</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;all&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="n">all</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Include prerelease versions when fetching from crates.io (e.g. 0.6.0-alpha&#39;).</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;allow-prerelease&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="n">allow_prerelease</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Print changes to be made without making them.</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;dry-run&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="n">dry_run</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Run without accessing the network</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;offline&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">offline</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"></span>

<span class="w">    </span><span class="c-Doc">/// Upgrade all packages to the version in the lockfile.</span>
<span class="w">    </span><span class="cp">#[structopt(long = </span><span class="s">&quot;to-lockfile&quot;</span><span class="cp">, conflicts_with = </span><span class="s">&quot;dependency&quot;</span><span class="cp">)]</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="n">to_lockfile</span><span class="o">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>I'm not singling these crates out by any stretch. I also understand that the
trait bounds in the <a href="https://diesel.rs/">diesel</a> case enable a great amount of
power, and I admire the amount of clever code that is going on behind the scenes
of a crate like <a href="https://crates.io/crates/structopt">structopt</a>, but it is a lot
of additional boilerplate or magic.</p>
<p>I think Rust inhabits a nice space in that it's not too simplistic to fail to
describe common problem domains in the type system in a satisfying and
reassuring way<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">2</a></sup>, and it's not so complicated that is painful to read a page
of Rust code. I think for 2020 I'd like to ensure that this last point doesn't
happen. I'd like to see Rust be cautious in adding new sigils. The process from
explicit error handling -&gt; <code>try!</code> -&gt; <code>?</code> was excellent in my opinion<sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">3</a></sup>. It was
quite slow, and a <em>lot</em> of input was gathered from the community<sup id="fnref:4"><a class="footnote-ref" href="#fn:4" rel="footnote">4</a></sup>.</p>
<p>My worry is that Rust will start including magic items and follow the path of
Haskell, where every library invents new operators (e.g. Parsec has <code>&lt;|&gt;</code> and
<code>&lt;?&gt;</code>, lens has <code>%%~</code>, <code>^.</code>) etc. This hides a lot of information from new
users.</p>
<p>One area Rust shines in is documentation. A lot of this "magic" can be overcome
with good documentation and extensive examples.</p>
<h2>A Greater Ecosystem</h2>
<p>I come from a Python background. Due to it's long life has had a great ecosystem
developed around it, with stable mature packages. My background is in scientific
computing so it's great to have the pydata ecosystem to play with.</p>
<p>I recognise that these packages have taken a long time to formalise. I started
working seriously with numerical Python around the time of <code>numpy</code>'s unification
of the numerical Python libraries.</p>
<p>I would love Rust to gain the stable and mature crates that it needs to be a
world-beating language. I love the way that Rust interfaces with C and has
really gained a lot of momentum wrapping existing code quickly.</p>
<p>Part of this maturity and stability must come from consensus from the community.
I hate to see the fragmentation between different implementations of the same
thing (e.g. <code>async-std</code>/<code>tokio</code>, or
<a href="https://github.com/tikv/grpc-rs"><code>grpcio</code></a>/<a href="https://crates.io/crates/grpc"><code>grpc</code></a>).
From what I've seen, the usual progression is at least:</p>
<ol>
<li>sync crate</li>
<li>async crate with <code>futures</code> 0.1</li>
<li>async crate with <code>async/await</code><sup id="fnref:5"><a class="footnote-ref" href="#fn:5" rel="footnote">5</a></sup></li>
</ol>
<p>Again this must occur early as people experiment with different implementations
(and as mentioned during the latest <a href="https://rustacean-station.org/episode/006-rust-1.39.0/">Rustacean Station
episode</a>, Rust as a
low-level systems language often cannot force an implementation on people as
users have different constraints), but I'm looking forward to the time when I'm
looking for a crate and there is an obvious well-tested option that interfaces
with the rest of the crates well. I suppose this means my wish for Rust 2020 is
for it to skip 10 years. Should I just wait?</p>
<h2>Compile Time</h2>
<p>I am a huge fan of pushing "things" (functionality or error detection) to
compile time. Yes this adds to the compile time of Rust crates (which is a sore
point for many people, myself included) but the extra confidence gained from
knowing that if my code compiles it <em>probably</em> works is a huge relief. I would
prefer to have a long compilation process in exchange for the constant threat of
runtime errors.</p>
<p>I am a great fan of the compile time checks Rust already performs, and the type
systems which make modelling complex scenarios a breeze. I am very happy that
more and more is able to be <code>const</code>, so calculated at compile time. I've been
watching <a href="https://www.youtube.com/user/jblow888/feed">Jonathan Blow's screencasts on his new
language</a> with great interest. He is
aiming for different trade-offs to Rust. His language is<sup id="fnref:6"><a class="footnote-ref" href="#fn:6" rel="footnote">6</a></sup> <em>completely</em>
interpretable so extremely capable at compile time code generation. The ability
to push computation to compile time and save valuable runtime resources is a
great benefit. I can see that benefiting systems built in Rust as well.</p>
<p>I think, and will always think that the more effort that is put into compiler
warnings, lints and errors the happier I will feel. I'm really happy that this
is considered so highly within the Rust community (as is documentation
generally).</p>
<h2>Misc</h2>
<p>Here we have a grab-bag of items that are not worth separate headings:</p>
<ul>
<li>I'd love command-line documentation of items, ideally the same interface for
  stdlib and crates (as per <code>pydoc</code>/<code>godoc</code>). I'd love to work on this feature
  myself as it's so close to my heart.</li>
<li>As mentioned before, compile times are always a problem.</li>
<li>I would love to see some of the new error handling libraries make it into the
  standard library. I can see progress with e.g. <code>anyhow</code>/<code>thiserror</code>.</li>
</ul>
<h1>Wrap up</h1>
<p>I know this post has been very contradictory. I want to have faster compile
times, yet push more complexity to the compiler and code analysis. I want to
have a stable ecosystem, but with a wide variety of functionality. I want to
have a simple yet extremely expressive and powerful language.</p>
<p>I think this completely summarises engineering. Engineering is about choosing
the best trade-off between multiple solutions. Finding a middle ground.</p>
<p>If any community can do this, the Rust community can.</p>
<p>- Simon</p>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>helped is one way of putting it&#160;<a class="footnote-backref" href="#fnref:1" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p>https://golang.org/&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>https://thefeedbackloop.xyz/stroustrups-rule-and-layering-over-time/&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>another thing Rust is excellent with: getting community input on big&#160;<a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>ok so this may be because of the excitement around async/await, hopefully
  we will be able to skip step 2 in the not-too-distant future.&#160;<a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>afaik
  decisions.&#160;<a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    </article>

        <div class="tags">
            <p>tags: <a href="https://mindriot101.github.io/tag/rust.html">rust</a>, <a href="https://mindriot101.github.io/tag/rust2020.html">rust2020</a></p>
        </div>

    <hr>

            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="https://twitter.com/srwalker101">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/mindriot101">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<p class="copyright text-muted">
    Blog powered by <a href="https://getpelican.com">Pelican</a>,
    which takes great advantage of <a href="https://python.org">Python</a>. <br />        &copy;  Simon Walker
</p>                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="https://mindriot101.github.io/theme/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="https://mindriot101.github.io/theme/js/bootstrap.min.js"></script>

        <!-- Custom Theme JavaScript -->
        <script src="https://mindriot101.github.io/theme/js/clean-blog.min.js"></script>

</body>

</html>