<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" href="https://unpkg.com/hack@0.7.7/dist/hack.css">
        <link type="text/css" rel="stylesheet" href="https://mindriot101.github.io/theme/css/main.css" />
        <title>circularspace</title>

            <meta name="author" content="Simon Walker" />
    </head>
    <body class="hack">
        <div class="container">
<div id="header">
    <h1><a href="https://mindriot101.github.io/">circularspace</a></h1>
    <h2>Links</h2>
    <ul>
        <li><a href="https://mindriot101.github.io/cv/">cv</a></li>
        <li><a href="https://github.com/mindriot101/">github</a></li>
        <li><a href="https://twitter.com/srwalker101">twitter</a></li>
    </ul>
</div>    <section>
        <article>
            <header>
                <h2>
                    <a href="https://mindriot101.github.io/blog/2016/05/06/numpy-functions-may-not-do-what-you-think/" rel="bookmark"
                       title="Permalink to Numpy functions may not do what you think">Numpy functions may not do what you think</a></h1>
                </h2>
                <p><i>2016-05-06</i></p>
                <div class="entry-content">
                    <p>Numpy has the ability to mask arrays and ignore their values for certain computations, called "masked arrays". They contain a <code>.mask</code> attribute which is a boolean array, <code>True</code> where the value should be masked and <code>False</code> otherwise.</p>
<p>Numpy also comes with a suite of functions which can handle this masking naturally. Typically for a function in the <code>np.</code> namespace, there is a masked-array-aware version under the <code>np.ma.</code> namespace:</p>
<div class="highlight"><pre>np.median  =&gt; np.ma.median
np.average =&gt; np.ma.average
</pre></div>


<p>A crucial thing to remember however is that <strong>standard <code>numpy</code> functions ignore the mask for a masked array</strong>.</p>
<p>This caught me out when sigma clipping values using <code>astropy.stats.sigma_clip</code> - which masks out values outside the sigma range. To ignore the sigma clipped values I should have used <code>np.ma.median</code> instead of <code>np.median</code>.</p>
                </div>
            </header>
        </article>
    </section>
        </div>
    </body>
</html>