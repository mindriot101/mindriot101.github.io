<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" href="https://unpkg.com/hack/dist/hack.css">
        <link type="text/css" rel="stylesheet" href="https://mindriot101.github.io/theme/css/main.css" />
        <title>circularspace</title>

            <meta name="author" content="Simon Walker" />
    </head>
    <body class="hack">
        <div class="container">
<div id="header">
    <h1><a href="https://mindriot101.github.io/">circularspace</a></h1>
</div>    <section>
        <article>
            <header>
                <h2>
                    <a href="https://mindriot101.github.io/blog/2010/07/27/changing-the-rpath-on-a-linux-binary/" rel="bookmark"
                       title="Permalink to Changing the rpath on a linux binary">Changing the rpath on a linux binary</a></h1>
                </h2>
                <p><i>2010-07-27</i></p>
                <div class="entry-content">
                    <p><a href="http://nixos.org/patchelf.html">PatchELF</a> is a program that allows the patching of the rpath of a
linux binary to be whatever you want, even the printing of it.</p>
<!--more-->

<p><strong>Short explanation:</strong></p>
<p>Shared libraries are used in an operating system to allow the easy
updating of code and patch fixing to a large group of programs. With
static libraries, a patchfix to a library common to many programs would
force the recompilation of those programs. A fix to a shared library
could go on behind the scenes without these other programs even
realising (in the best case!).</p>
<p>To accomodate for this functionality, shared libraries must be located
during runtime. There are three ways to do this (in order):</p>
<ol>
<li>System default paths</li>
<li>The binaries <em>rpath</em></li>
<li>The <em>LD_LIBRARY_PATH</em> enviroment variable</li>
</ol>
<p>Libraries found in stage 3 will override libraries found in stage 2 and
the same for 2->1. Because of this overriding, the <em>LD_LIBRARY_PATH</em>
method is very dangerous, as the user can accidentally change this and
cause many programs to break.</p>
<p>As far as the sysadmin is concerned, the best way to install new
software is to update the local database which contains the system
default paths, but for the developer who wishes to compile their own
programs, option 2 is the best.</p>
<p>See my <a href="{{ site.url }}/assets/Programming/linking-on-linux.md">previous post</a> to see how to do this at compile time, but say
while developing a piece of software, you want to see what these paths
are or change them. This is where <em>PatchELF</em> comes in handy. It allows
the printing of the <em>rpath</em> variable or setting it to a completely new
location (eg. for testing against a custom version of the system
libraries).Â  It even allows the changing of the system default path
interpreter.</p>
<p>For more information see <a href="http://www.eyrie.org/~eagle/notes/rpath.html">this very informative post</a>.</p>
                </div>
            </header>
        </article>
    </section>
        </div>
    </body>
</html>