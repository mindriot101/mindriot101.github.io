<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" href="https://unpkg.com/hack@0.7.7/dist/hack.css">
        <link type="text/css" rel="stylesheet" href="https://mindriot101.github.io/theme/css/main.css" />
        <title>circularspace</title>

            <meta name="author" content="Simon Walker" />
    </head>
    <body class="hack">
        <div class="container">
<div id="header">
    <h1><a href="https://mindriot101.github.io/">circularspace</a></h1>
    <h2>Links</h2>
    <ul>
        <li><a href="https://mindriot101.github.io/cv/">cv</a></li>
        <li><a href="https://github.com/mindriot101/">github</a></li>
        <li><a href="https://twitter.com/srwalker101">twitter</a></li>
    </ul>
</div>    <section>
        <article>
            <header>
                <h2>
                    <a href="https://mindriot101.github.io/blog/2013/07/29/using-guard-with-foreman/" rel="bookmark"
                       title="Permalink to Using guard with foreman">Using guard with foreman</a></h1>
                </h2>
                <p><i>2013-07-29</i></p>
                <div class="entry-content">
                    <p>I've been playing with <a href="http://www.ruby-lang.org/">Ruby</a> quite a bit recently and I like the way a custom-looking DSL can be created from the same source language.</p>
<p>This means I've converted a lot of my tools (e.g. Makefiles) into Rakefiles and I've just found <a href="http://ddollar.github.io/foreman/">foreman</a> which can manage multiple subprocesses and combine their output into a nice looking coloured console result. This is typically used to manage web processes (server, task runner, development database etc.) and is required by <a href="http://heroku.com">heroku</a>.</p>
<p>I was using this technique with a simple <code>Procfile</code> for managing my thesis. I have two tasks running: <a href="http://users.phys.psu.edu/~collins/software/latexmk-jcc/">latexmk</a> which manages the latex compiling, and <a href="http://guardgem.org/">guard</a> which manages the python plotting.</p>
<p>I added these to the <code>Procfile</code> as such</p>
<div class="highlight"><pre><span class="ss">latex</span><span class="p">:</span> <span class="n">latexmk</span> <span class="o">-</span><span class="n">pvc</span> <span class="o">--</span><span class="n">pdf</span> <span class="no">Thesis</span>
<span class="ss">plotting</span><span class="p">:</span> <span class="n">bundle</span> <span class="nb">exec</span> <span class="n">guard</span>
</pre></div>


<p>This would cause both processes to hang, which I couldn't explain. I then thought that guard is interactive: it has an interface for managing specific tasks or getting info about the processes running. I searched through the guard help to find the <code>--no-interactions</code> flag and this solved my problem. My new complete Procfile is now</p>
<div class="highlight"><pre><span class="ss">latex</span><span class="p">:</span> <span class="n">latexmk</span> <span class="o">-</span><span class="n">pvc</span> <span class="o">--</span><span class="n">pdf</span> <span class="no">Thesis</span>
<span class="ss">plotting</span><span class="p">:</span> <span class="n">bundle</span> <span class="nb">exec</span> <span class="n">guard</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">interactions</span>
</pre></div>
                </div>
            </header>
        </article>
    </section>
        </div>
    </body>
</html>