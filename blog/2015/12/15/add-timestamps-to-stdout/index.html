<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" href="https://unpkg.com/hack@0.7.7/dist/hack.css">
        <link type="text/css" rel="stylesheet" href="https://mindriot101.github.io/theme/css/main.css" />
        <title>circularspace</title>

            <meta name="author" content="Simon Walker" />
    </head>
    <body class="hack">
        <div class="container">
<div id="header">
    <h1><a href="https://mindriot101.github.io/">circularspace</a></h1>
    <h2>Links</h2>
    <ul id="navbar">
        <li><a href="https://mindriot101.github.io/cv/">cv</a></li>
        <li><a href="https://github.com/mindriot101/">github</a></li>
        <li><a href="https://twitter.com/srwalker101">twitter</a></li>
    </ul>
</div>    <section>
        <article>
            <header>
                <h2>
                    <a href="https://mindriot101.github.io/blog/2015/12/15/add-timestamps-to-stdout/" rel="bookmark"
                       title="Permalink to Add timestamps to stdout">Add timestamps to stdout</a></h1>
                </h2>
                <p><i>2015-12-15</i></p>
                <div class="entry-content">
                    <p>I spent some time trying to get timestamps added to C++ printing, e.g .through <code>cout</code>.</p>
<p>I naive approach is to write a function <code>get_current_time()</code> and put it before all printing statements e.g.:</p>
<div class="highlight"><pre><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">get_current_time</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Message&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div>


<p>This requires changing all logging statements. Then my googling stumbled upon <a href="https://stackoverflow.com/questions/22118713/add-time-stamp-with-stdcout">this question</a> which had an <a href="http://stackoverflow.com/a/22119115/56711">elegant solution</a> incorporating a decorator object.</p>
<p>Further down the page however I came upon a much nicer solution that transcends languages and programs and can be applied to running shell commands. <a href="http://stackoverflow.com/a/22130756/56711">The answer I ended up stealing and adding to my .zshrc</a> is as follows:</p>
<div class="highlight"><pre><span class="k">function</span> add_timestamps<span class="o">()</span> <span class="o">{</span>
    awk <span class="s1">&#39;{print &quot;[&quot;strftime()&quot;]: &quot;$0}&#39;</span>
<span class="o">}</span>
</pre></div>


<p>This can be used after a program is run e.g. <code>a.out | add_timestamps</code> to add the current time before every line printed out by <code>a.out</code>.</p>
<p>Even <code>top</code> can be passed through this function, but with predictably nasty results!</p>
                </div>
            </header>
        </article>
    </section>
        </div>
    </body>
</html>