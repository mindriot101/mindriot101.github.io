<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>circularspace - c</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.xml" type="application/atom+xml" rel="alternate" title="circularspace Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">circularspace </a></h1>
                <nav><ul>
                    <li><a href="/category/gaming.html">gaming</a></li>
                    <li><a href="/category/life.html">life</a></li>
                    <li><a href="/category/science.html">science</a></li>
                    <li><a href="/category/tech.html">tech</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/changing-the-rpath-on-a-linux-binary.html">Changing the rpath on a linux binary</a></h1>
<footer class="post-info">
        <abbr class="published" title="2010-07-27T10:15:00+02:00">
                Published: Tue 27 July 2010
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/simon-walker.html">Simon Walker</a>
        </address>
<p>In <a href="/category/tech.html">tech</a>. </p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/c.html">c</a> </p>
</footer><!-- /.post-info --><p><a href="http://nixos.org/patchelf.html">PatchELF</a> is a program that allows the patching of the rpath of a
linux binary to be whatever you want, even the printing of it.</p>
<!--more-->

<p><strong>Short explanation:</strong></p>
<p>Shared libraries are used in an operating system to allow the easy
updating of code and patch fixing to a large group of programs. With
static libraries, a patchfix to a library common to many programs would
force the recompilation of those programs. A fix to a shared library
could go on behind the scenes without these other programs even
realising (in the best case!).</p>
<p>To accomodate for this functionality, shared libraries must be located
during runtime. There are three ways to do this (in order):</p>
<ol>
<li>System default paths</li>
<li>The binaries <em>rpath</em></li>
<li>The <em>LD_LIBRARY_PATH</em> enviroment variable</li>
</ol>
<p>Libraries found in stage 3 will override libraries found in stage 2 and
the same for 2->1. Because of this overriding, the <em>LD_LIBRARY_PATH</em>
method is very dangerous, as the user can accidentally change this and
cause many programs to break.</p>
<p>As far as the sysadmin is concerned, the best way to install new
software is to update the local database which contains the system
default paths, but for the developer who wishes to compile their own
programs, option 2 is the best.</p>
<p>See my <a href="{{ site.url }}/assets/Programming/linking-on-linux.md">previous post</a> to see how to do this at compile time, but say
while developing a piece of software, you want to see what these paths
are or change them. This is where <em>PatchELF</em> comes in handy. It allows
the printing of the <em>rpath</em> variable or setting it to a completely new
location (eg. for testing against a custom version of the system
libraries).  It even allows the changing of the system default path
interpreter.</p>
<p>For more information see <a href="http://www.eyrie.org/~eagle/notes/rpath.html">this very informative post</a>.</p><p>There are <a href="/changing-the-rpath-on-a-linux-binary.html#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/linking-on-linux.html" rel="bookmark"
                           title="Permalink to Linking on linux">Linking on linux</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2010-07-08T15:24:00+02:00">
                Published: Thu 08 July 2010
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/simon-walker.html">Simon Walker</a>
        </address>
<p>In <a href="/category/tech.html">tech</a>. </p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/c.html">c</a> </p>
</footer><!-- /.post-info -->                <p>I've just found out what some strange linking options mean with gcc!</p>
<p>Quite often i've seen at the linking stage</p>
<div class="highlight"><pre>gcc object.o -o executable.out -lsomelibrary -Wl,-rpath,somepath
</pre></div>


<p>I've discovered that the -Wl,-rpath,somepath expands basically to</p>
<div class="highlight"><pre>-Wl -rpath<span class="o">=</span>somepath
</pre></div>


<p>and this means the ...</p>
                <a class="readmore" href="/linking-on-linux.html">read more</a>
<p>There are <a href="/linking-on-linux.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/allowing-the-use-of-clang-in-qmake.html" rel="bookmark"
                           title="Permalink to Allowing the use of clang in qmake">Allowing the use of clang in qmake</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2010-07-01T14:54:00+02:00">
                Published: Thu 01 July 2010
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/simon-walker.html">Simon Walker</a>
        </address>
<p>In <a href="/category/tech.html">tech</a>. </p>
<p>tags: <a href="/tag/c.html">c</a> </p>
</footer><!-- /.post-info -->                <p>Clang is an attempt at creating a gcc replacement front end for *nix
based systems with static code analysis and more helpful error messages
etc.</p>
<p>To allow the use of the clang compiler, the easiest way is to create a 
new <em>mkspec</em>, and create a Makefile with</p>
<div class="highlight"><pre>qmake -spec linux-clang ...</pre></div>
                <a class="readmore" href="/allowing-the-use-of-clang-in-qmake.html">read more</a>
<p>There are <a href="/allowing-the-use-of-clang-in-qmake.html#disqus_thread">comments</a>.</p>                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://mindriot101.github.io/cv/">CV</a></li>
                            <li><a href="https://osrc.dfm.io/mindriot101/">OSRC</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/srwalker101">@srwalker101</a></li>
                            <li><a href="https://github.com/mindriot101">mindriot101</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'circularspace-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>